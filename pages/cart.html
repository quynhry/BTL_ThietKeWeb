<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Giỏ hàng | Yên Hoa</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Quicksand:wght@400;600&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="../assets/css/style.css">
<link rel="stylesheet" href="../assets/css/cart.css">
 <link rel="icon" type="image/png" sizes="32x32" href="../assets/img/logo.png">
</head>
<body>

<header id="header" class="visible simple-header">
    <div class="header-container">

        <!-- Logo -->
        <div class="header-logo">
            <a href="../index.html">YÊN HOA</a>
        </div>

       <ul class="header-menu">
                <li class="menu-item"><a href="gioi_thieu.html">Giới thiệu</a></li>

                <li class="menu-item">
                    <a href="../san-pham.html">Sản phẩm</a>
                    <ul class="sub-menu">
                        <li class="menu-home">
                            <a href="ao_dai_tet.html">Áo Dài Tết</a>
                            <ul class="sub-menu sub-menu2">
                                <li><a href="xuan_y_bich_hoa.html">Xuân Ý Bích Họa</a></li>
                                <li><a href="hoa_cam.html">Họa Cầm</a></li>
                            </ul>
                        </li>
                        <li class="menu-home">
                            <a href="ao_dai_me.html">Áo Dài Mẹ</a>
                            <ul class="sub-menu sub-menu2">
                                <li><a href="phuong_vu.html">Phượng Vũ</a></li>
                                <li><a href="tu_van.html">Từ Vân</a></li>
                            </ul>
                        </li>
                        <li class="menu-home">
                            <a href="ao_dai_truyen_thong.html">Áo Dài Truyền Thống</a>
                            <ul class="sub-menu sub-menu2">
                                <li><a href="duyen.html">Duyên</a></li>
                                <li><a href="diem.html">Diễm</a></li>
                                <li><a href="ha_thu.html">Hạ Thu</a></li>
                                <li><a href="truc_giao.html">Trúc Giao</a></li>
                            </ul>
                        </li>
                    </ul>
                </li>

                <li class="menu-item">
                    <a href="bo_suu_tap_cuoi.html">Bộ Sưu Tập Cưới</a>
                    <ul class="sub-menu">
                        <li><a href="duyen_uoc.html">Duyên Ước</a></li>
                        <li><a href="giao_duyen.html">Giao Duyên</a></li>
                        <li><a href="nhan_duyen.html">Nhân Duyên</a></li>
                        <li><a href="tam_duyen.html">Tầm Duyên</a></li>
                    </ul>
                </li>

                <li class="menu-item"><a href="cuahang.html">Cửa hàng</a></li>
                <li class="menu-item"><a href="khach_hang.html">Khách hàng</a></li>
            </ul>

        <!-- Icons -->
        <div class="header-icons">
            <i class="fa-solid fa-magnifying-glass"></i>

            <div class="user-menu" id="headerUser"></div>

            <div class="cart-icon" onclick="location.href='cart.html'">
                <i class="fa-solid fa-cart-shopping"></i>
                <span id="cartIconCount">0</span>
            </div>
        </div>

    </div>
</header>



<div class="cart-page">
    <h1 class="cart-title">Giỏ hàng của bạn</h1>


    <div class="cart-content">
        <!-- LEFT -->
        <div class="cart-left" id="cartLeft"></div>

        <!-- RIGHT -->
        <div class="cart-right">
            <h3>Tổng đơn hàng</h3>
            <div class="cart-summary">
                <p>Tạm tính <span id="subtotal">0đ</span></p>
                <p>Phí ship <span id="shipping">30.000đ</span></p>
            </div>
            <div class="cart-total">Tổng: <span id="total">0đ</span></div>
            <button class="checkout-btn">Thanh toán</button>
        </div>
    </div>
</div>
<section class="footer" style="width: 100%;">
    <div class="footer-container">
      <div class="footer-top">
        <div class="footer-logo-section">
          <div class="footer-logo">
            <img src="../assets/img/logo.png" alt="Logo" style="height: 60px; width: 60px" />
            <h1>YÊN HOA</h1>
          </div>
          <p class="footer-description">
            Yên Hoa tự hào đã bán ra hơn 16.000 sản phẩm, khẳng định chất lượng và uy tín trên thị trường.<br>
            Khách hàng của Yên Hoa đã vượt mốc 10.000 người, minh chứng cho sự yêu mến và ủng hộ từ cộng đồng!
          </p>
          <div class="footer-members">
            <img src="../assets/img/anhnguoi.jpg" alt="">
            <img src="../assets/img/anhnguoi2.jpg" alt="">
            <img src="../assets/img/anhnguoi3.jpg" alt="">
            <span><strong>10.000</strong> Khách hàng đã tin tưởng </span>
          </div>
        </div>
 
        <div class="footer-columns">
          <div class="footer-column">
            <h6>VỀ CHÚNG TÔI</h6>
            <ul>
              <li><a href="../pages/policy.html">Điều Khoản</a></li>
              <li><a href="pages/contact.html">Liên hệ</a></li>
              <li><a href="pages/about.html">Giới thiệu</a></li>
             
            </ul>
          </div>
          <div class="footer-column">
            <h6>LIÊN HỆ</h6>
            <ul>
              <li><i class="fas fa-map-marker-alt me-2"></i>12 Chùa Bộc, Đống Đa, Hà Nội</li>
              <li><i class="fas fa-phone-alt  me-2"></i>0123 456 789</li>
              <li><i class="fas fa-phone-alt  me-2"></i>0987 654 321</li>
              <li><i class="fas fa-envelope  me-2"></i>aodaiyenhoa@gmail.com</li>
            </ul>
          </div>
          <div class="footer-column">
            <h6>SẢN PHẨM</h6>
            <ul>
              <li><a href="pages/phong_canh.html"> Áo Dài Tết</a></li>
              <li><a href="pages/tranh_son_dau.html">Áo Dài Mẹ</a></li>
              <li><a href="pages/tranh_chu_de.html">Áo Dài Truyền Thống</a></li>
              <li><a href="pages/tranh_den_led.html">Bộ Sưu Tập Cưới</a></li>
            </ul>
            
          </div>
        </div>
      </div>
 
      <div class="footer-bottom">
        <p>© <a href="./index.html">Yên Hoa</a> 2025, All rights reserved.</p>
        <ul>
          <li>Giao hàng nhanh chóng</li>
          <li>Phản hồi kịp thời</li>
          <li>Uy tín-chất lượng</li>
        </ul>
      </div>
    </div>
  </section>
<script src="../assets/js/auth.js"></script>
<script>
// ======================= GIỎ HÀNG MẪU =======================
let cartItems = [
    { id: 1, title: 'Áo dài Yên Hoa', price: 1200000, quantity: 1, image: '../assets/img/sample1.jpg' },
    { id: 2, title: 'Áo dài Truyền Thống', price: 900000, quantity: 2, image: '../assets/img/sample2.jpg' }
];

// ======================= RENDER GIỎ HÀNG =======================
function renderCart() {
    const cartLeft = document.getElementById('cartLeft');
    cartLeft.innerHTML = '';

    // Nếu giỏ trống
    if (cartItems.length === 0) {
        cartLeft.innerHTML = `
            <div class="empty-cart">
                <i class="fa-solid fa-cart-shopping"></i>
                <p>Giỏ hàng của bạn đang trống</p>
                <a href="../san-pham.html" class="back-shop-btn">
                    Tiếp tục mua sắm
                </a>
            </div>
        `;
        updateTotals();
        return;
    }

    // Có sản phẩm
    cartItems.forEach((item, index) => {
        const div = document.createElement('div');
        div.className = 'cart-item';
        div.innerHTML = `
            <img src="${item.image}" class="cart-img">
            <div class="cart-info">
                <h4>${item.title}</h4>
                <p>${item.price.toLocaleString()}đ</p>
                <div class="quantity-controls">
                    <button class="btn-minus">-</button>
                    <span>${item.quantity}</span>
                    <button class="btn-plus">+</button>
                </div>
            </div>
            <button class="delete-btn"><i class="fa-solid fa-xmark"></i></button>
        `;
        cartLeft.appendChild(div);

        const minus = div.querySelector('.btn-minus');
        const plus = div.querySelector('.btn-plus');
        const deleteBtn = div.querySelector('.delete-btn');
        const qtySpan = div.querySelector('.quantity-controls span');

        minus.addEventListener('click', () => {
            if (item.quantity > 1) item.quantity--;
            qtySpan.textContent = item.quantity;
            updateTotals();
        });

        plus.addEventListener('click', () => {
            item.quantity++;
            qtySpan.textContent = item.quantity;
            updateTotals();
        });

        deleteBtn.addEventListener('click', () => {
            cartItems.splice(index, 1);
            renderCart();
        });
    });

    updateTotals();
}

// ======================= TÍNH TỔNG TIỀN =======================
function updateTotals() {
    const subtotal = cartItems.reduce(
        (sum, item) => sum + item.price * item.quantity, 0
    );
    const shipping = cartItems.length > 0 ? 30000 : 0;
    const total = subtotal + shipping;

    document.getElementById('subtotal').textContent = subtotal.toLocaleString() + 'đ';
    document.getElementById('shipping').textContent = shipping.toLocaleString() + 'đ';
    document.getElementById('total').textContent = total.toLocaleString() + 'đ';
    document.getElementById('cartIconCount').textContent = cartItems.length;
}

// ======================= KIỂM TRA ĐĂNG NHẬP =======================
document.addEventListener("DOMContentLoaded", () => {
    const currentUser = getCurrentUser(); // từ auth.js
    renderHeaderUser();

    if (!currentUser) {
        alert("Bạn cần đăng nhập để xem giỏ hàng!");
        localStorage.setItem("redirectAfterLogin", "cart.html");
        window.location.href = "login.html";
        return;
    }

    renderCart();
});

// ======================= THANH TOÁN =======================
document.querySelector('.checkout-btn').addEventListener('click', () => {
    localStorage.setItem('cart', JSON.stringify(cartItems));
    window.location.href = "checkout.html";
});
</script>


<script>// Nút thanh toán
const checkoutBtn = document.querySelector('.checkout-btn');
checkoutBtn.addEventListener('click', () => {
    // Lưu giỏ hàng vào localStorage trước khi sang trang thanh toán
    localStorage.setItem('cart', JSON.stringify(cartItems));

    // Chuyển hướng sang trang thanh toán
    window.location.href = "checkout.html";
});
</script>

</body>
</html>
